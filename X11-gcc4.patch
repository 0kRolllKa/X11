--- X11-6.8.2/xc/programs/Xserver/fb/Makefile.orig	2005-02-15 02:52:03.000000000 +0100
+++ X11-6.8.2/xc/programs/Xserver/fb/Makefile	2005-02-15 10:21:09.709904792 +0100
@@ -291,7 +291,7 @@
       PROJECTROOT = /usr/X11R6
 
       CDEBUGFLAGS = -O2 -fno-strength-reduce -fno-strict-aliasing
-        CCOPTIONS = -ansi -pedantic -Wall -Wpointer-arith -Wundef
+        CCOPTIONS = -std=gnu9x -pedantic -Wall -Wpointer-arith -Wundef
 
       ALLINCLUDES = $(INCLUDES) $(EXTRA_INCLUDES) $(TOP_INCLUDES) $(INSTALLED_INCLUDES) $(STD_INCLUDES)
        ALLDEFINES = $(ALLINCLUDES) $(STD_DEFINES) $(PROTO_DEFINES) $(THREADS_DEFINES) $(MODULE_DEFINES) $(DEFINES) $(EXTRA_DEFINES)
@@ -1076,7 +1076,7 @@
 
          CC = gcc -m32
 
-  CCOPTIONS = -ansi -pedantic -Wall -Wpointer-arith -Wundef
+  CCOPTIONS = -std=gnu9x -pedantic -Wall -Wpointer-arith -Wundef
 
 STD_DEFINES = -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L 				-D_POSIX_SOURCE -D_XOPEN_SOURCE 				-D_BSD_SOURCE -D_SVID_SOURCE 				 -D_GNU_SOURCE 				 -DSHAPE -DXINPUT -DXKB -DLBX -DXAPPGROUP 	-DXCSECURITY -DTOGCUP  	-DXF86BIGFONT -DDPMSExtension 	 -DPIXPRIV -DPANORAMIX 	 -DRENDER -DRANDR 	-DXFIXES -DDAMAGE -DCOMPOSITE -DXEVIE 	 -DGCCUSESGAS -DAVOID_GLYPHBLT -DPIXPRIV -DSINGLEDEPTH 				-DXFreeXDGA -DXvExtension 				-DXFree86LOADER  -DXFree86Server 				-DXF86VIDMODE 				-DXvMCExtension 				-DSMART_SCHEDULE 				-DBUILDDEBUG -DXResExtension 				-DX_BYTE_ORDER=$(X_BYTE_ORDER) 				-DXORG_VERSION_CURRENT="$(XORG_VERSION_CURRENT)" -DNDEBUG  $(SERVER_THREAD_DEFINES)
 CDEBUGFLAGS = -O2 -fno-strength-reduce -fno-strict-aliasing
--- X11-6.8.2/xc/programs/Xserver/fb/fbmmx.c.orig	2004-07-22 21:24:50.000000000 +0200
+++ X11-6.8.2/xc/programs/Xserver/fb/fbmmx.c	2005-02-15 10:32:50.573357352 +0100
@@ -23,6 +23,7 @@
  * Based on work by Owen Taylor
  */
 
+#include <mmintrin.h>
 #include "fb.h"
 
 #ifdef USE_GCC34_MMX
@@ -33,10 +34,10 @@
 #include "mipict.h"
 #include "fbpict.h"
 
-typedef int Vector1x64 __attribute__ ((mode(DI)));
-typedef int Vector2x32 __attribute__ ((mode(V2SI)));
-typedef int Vector4x16 __attribute__ ((mode(V4HI)));
-typedef int Vector8x8  __attribute__ ((mode(V8QI)));
+typedef __m64 Vector1x64;
+typedef __v2si Vector2x32;
+typedef __v4hi Vector4x16;
+typedef __v8qi Vector8x8;
 
 typedef unsigned long long ullong;
 
@@ -92,9 +93,9 @@
 shift (Vector1x64 v, int s)
 {
     if (s > 0)
-	return __builtin_ia32_psllq (v, s);
+	return (Vector1x64)__builtin_ia32_psllq ((ullong)v, (ullong)s);
     else if (s < 0)
-	return __builtin_ia32_psrlq (v, -s);
+	return (Vector1x64)__builtin_ia32_psrlq ((ullong)v, (ullong)-s);
     else
 	return v;
 }
--- X11-6.8.2/xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_chipset.h.orig	2004-08-12 04:23:46.000000000 +0200
+++ X11-6.8.2/xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_chipset.h	2005-02-15 11:00:00.350593552 +0100
@@ -1,4 +1,4 @@
-static SymTabRec RADEONChipsets[] = {
+SymTabRec RADEONChipsets[] = {
     { PCI_CHIP_RADEON_QD, "ATI Radeon QD (AGP)" },
     { PCI_CHIP_RADEON_QE, "ATI Radeon QE (AGP)" },
     { PCI_CHIP_RADEON_QF, "ATI Radeon QF (AGP)" },
