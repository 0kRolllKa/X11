--- xc.orig/programs/Xserver/hw/xfree86/drivers/mga/mga_dri.c	2004-08-08 14:22:29.000000000 +0200
+++ xc/programs/Xserver/hw/xfree86/drivers/mga/mga_dri.c	2004-08-08 15:13:17.170055096 +0200
@@ -982,6 +982,7 @@
    DRIInfoPtr pDRIInfo;
    MGADRIPtr pMGADRI;
    MGADRIServerPrivatePtr pMGADRIServer;
+   CARD32 pciCommand;
 
    switch(pMga->Chipset) {
    case PCI_CHIP_MGAG550:
@@ -1257,6 +1258,11 @@
    }
    xf86DrvMsg( pScrn->scrnIndex, X_INFO, "[dri] visual configs initialized\n" );
 
+   /* Enable bus mastering in PCI config space */
+   pciCommand = pciReadLong(pMga->PciTag, PCI_CMD_STAT_REG);
+   pciWriteLong(pMga->PciTag, PCI_CMD_STAT_REG,
+		pciCommand | PCI_CMD_MASTER_ENABLE);
+
    return TRUE;
 }
 
